version: '0.1-dev'

- name: web
  replicas: 2
  containers:
  - image: wordpress:4
    env:
    - name: WORDPRESS_DB_HOST
      value: database:3306
    - name: WORDPRESS_DB_PASSWORD
      value: wordpress
    - name: WORDPRESS_DB_USER
      value: wordpress
    - name: WORDPRESS_DB_NAME
      value: wordpress
    health:
      livenessProbe:
        httpGet:
          path: /
          port: 80
        initialDelaySeconds: 120
        timeoutSeconds: 5
      readinessProbe:
        httpGet:
          path: /
          port: 80
        initialDelaySeconds: 5
        timeoutSeconds: 1
    ports:
    - port: 80:8080
      type: external
